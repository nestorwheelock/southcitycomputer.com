<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex,nofollow">
    <title>Log in | Django site admin</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap">
    <style>
        * { box-sizing: border-box; }
        body {
            margin: 0;
            padding: 0;
            font-family: "Roboto", "Lucida Grande", Verdana, Arial, sans-serif;
            font-size: 14px;
            color: #333;
            background: #fff;
        }
        #header {
            background: #417690;
            color: #ffc;
            padding: 10px 40px;
        }
        #header h1 {
            margin: 0;
            font-size: 18px;
            font-weight: 400;
        }
        #header h1 a {
            color: #ffc;
            text-decoration: none;
        }
        #branding h1, #branding h2 {
            display: inline;
        }
        #content {
            padding: 20px 40px;
        }
        #content-main {
            max-width: 400px;
        }
        h1 {
            font-size: 18px;
            color: #666;
            font-weight: 400;
            margin: 0 0 20px 0;
        }
        .form-row {
            padding: 10px 0;
            border-bottom: 1px solid #eee;
        }
        .form-row:last-of-type {
            border-bottom: none;
        }
        label {
            display: block;
            font-weight: 700;
            color: #666;
            margin-bottom: 5px;
            font-size: 13px;
        }
        .required:after {
            content: " *";
            color: #cc0000;
        }
        input[type="text"],
        input[type="password"] {
            width: 100%;
            padding: 8px 10px;
            font-size: 14px;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-family: inherit;
        }
        input[type="text"]:focus,
        input[type="password"]:focus {
            border-color: #417690;
            outline: none;
        }
        .submit-row {
            padding: 12px 0;
            margin-top: 10px;
        }
        input[type="submit"] {
            background: #417690;
            color: #fff;
            border: none;
            padding: 10px 15px;
            font-size: 14px;
            cursor: pointer;
            border-radius: 4px;
            font-family: inherit;
        }
        input[type="submit"]:hover {
            background: #205067;
        }
        .errornote {
            background: #ffefef;
            border: 1px solid #c00;
            color: #c00;
            padding: 10px 12px;
            margin-bottom: 15px;
            border-radius: 4px;
            display: none;
        }
        #footer {
            clear: both;
            padding: 10px 40px;
            color: #999;
            font-size: 11px;
        }
        .password-reset-link {
            margin-top: 15px;
        }
        .password-reset-link a {
            color: #417690;
            text-decoration: none;
            font-size: 13px;
        }
        .password-reset-link a:hover {
            text-decoration: underline;
        }

        /* Disco party overlay */
        #disco {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4, #ffe66d, #ff6b6b, #9b59b6, #3498db, #e74c3c);
            background-size: 700% 700%;
            animation: discoGradient 2s ease infinite;
            z-index: 99999;
            overflow: hidden;
        }
        @keyframes discoGradient {
            0% { background-position: 0% 50%; }
            25% { background-position: 100% 0%; }
            50% { background-position: 100% 100%; }
            75% { background-position: 0% 100%; }
            100% { background-position: 0% 50%; }
        }
        #rick-dancer {
            position: absolute;
            width: 300px;
            height: auto;
            pointer-events: none;
            filter: drop-shadow(0 0 20px rgba(255,255,255,0.8));
        }

        /* Windows BSOD */
        #bsod {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #0078d7;
            z-index: 999999;
            padding: 10% 15%;
            font-family: "Segoe UI", Tahoma, sans-serif;
            color: #fff;
            cursor: none;
        }
        #bsod .sad-face { font-size: 8rem; margin-bottom: 30px; }
        #bsod h1 { font-size: 1.8rem; font-weight: 200; margin-bottom: 20px; }
        #bsod p { font-size: 0.9rem; font-weight: 200; line-height: 1.6; margin-bottom: 30px; }
        #bsod .progress { margin-bottom: 30px; }
        #bsod .qr-section { display: flex; gap: 20px; align-items: flex-start; }
        #bsod .qr-code { width: 100px; height: 100px; background: #fff; padding: 5px; border-radius: 8px; overflow: hidden; }
        #bsod .qr-code img { width: 100%; height: 100%; object-fit: cover; display: none; }
        #bsod .qr-text { font-size: 0.75rem; line-height: 1.5; }
        #bsod .qr-text p { margin-bottom: 10px; font-size: 0.75rem; }
        #bsod .stop-code { font-size: 0.75rem; margin-top: 20px; }

        /* Reboot screen */
        #reboot {
            display: none;
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: #000;
            z-index: 9999999;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            font-family: "Segoe UI", Tahoma, sans-serif;
            color: #fff;
            overflow: hidden;
        }
        #reboot h1 { font-size: 2rem; font-weight: 200; animation: rebootBlink 1s infinite; z-index: 2; position: relative; }
        #reboot img { z-index: 2; position: relative; }
        @keyframes rebootBlink { 0%, 50% { opacity: 1; } 51%, 100% { opacity: 0.5; } }
        #kernel-log {
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
            font-family: "Courier New", monospace;
            font-size: 12px;
            color: #0f0;
            padding: 10px;
            box-sizing: border-box;
            overflow: hidden;
            z-index: 1;
            opacity: 0.7;
        }
        #kernel-log div { white-space: nowrap; }
    </style>
</head>
<body>
    <div id="header">
        <div id="branding">
            <h1><a href="/admin/">Django administration</a></h1>
        </div>
    </div>

    <div id="content">
        <div id="content-main">
            <h1>Log in</h1>
            <p class="errornote" id="error-msg">Please enter the correct username and password for a staff account. Note that both fields may be case-sensitive.</p>
            <form id="login-form" action="" method="post">
                <div class="form-row">
                    <label class="required" for="id_username">Username:</label>
                    <input type="text" name="username" id="id_username" autofocus required>
                </div>
                <div class="form-row">
                    <label class="required" for="id_password">Password:</label>
                    <input type="password" name="password" id="id_password" required>
                </div>
                <div class="submit-row">
                    <input type="submit" value="Log in">
                </div>
            </form>
            <p class="password-reset-link">
                <a href="#">Forgotten your password or username?</a>
            </p>
        </div>
    </div>

    <div id="footer"></div>

    <div id="disco">
        <img id="rick-dancer" src="/images/rick-astley.webp" alt="">
        <audio id="disco-audio">
            <source src="/audio/rickroll.mp3" type="audio/mpeg">
        </audio>
    </div>

    <div id="bsod">
        <div class="sad-face">:(</div>
        <h1>Your PC ran into a problem and needs to restart. We're just collecting some error info, and then we'll restart for you.</h1>
        <div class="progress"><span id="bsod-progress">0% complete</span></div>
        <div class="qr-section">
            <div class="qr-code">
                <svg id="fake-qr" viewBox="0 0 100 100" fill="#000">
                    <rect x="10" y="10" width="20" height="20"/><rect x="40" y="10" width="10" height="10"/>
                    <rect x="60" y="10" width="10" height="10"/><rect x="70" y="10" width="20" height="20"/>
                    <rect x="10" y="40" width="10" height="10"/><rect x="30" y="40" width="10" height="10"/>
                    <rect x="50" y="40" width="10" height="10"/><rect x="70" y="40" width="10" height="10"/>
                    <rect x="10" y="70" width="20" height="20"/><rect x="40" y="60" width="10" height="10"/>
                    <rect x="60" y="70" width="10" height="10"/><rect x="80" y="70" width="10" height="10"/>
                    <rect x="40" y="80" width="20" height="10"/>
                </svg>
                <img id="rick-qr" src="/images/rick-astley.webp" alt="">
            </div>
            <div class="qr-text">
                <p>For more information about this issue and possible fixes, visit<br>https://www.windows.com/stopcode</p>
                <p>If you call a support person, give them this info:</p>
                <p class="stop-code">Stop code: NOT_DJANGO_OBVIOUSLY</p>
            </div>
        </div>
    </div>

    <div id="reboot">
        <div id="kernel-log"></div>
        <img src="/images/naughty-santa.webp" alt="" style="max-width: 300px; margin-bottom: 30px;">
        <h1>Rebooting....</h1>
    </div>

    <script>
        (function() {
            var form = document.getElementById('login-form');
            var disco = document.getElementById('disco');
            var discoAudio = document.getElementById('disco-audio');
            var rick = document.getElementById('rick-dancer');
            var bsod = document.getElementById('bsod');
            var bsodProgress = document.getElementById('bsod-progress');
            var reboot = document.getElementById('reboot');
            var fakeQr = document.getElementById('fake-qr');
            var rickQr = document.getElementById('rick-qr');

            var rickX = 100, rickY = 100;
            var rickVX = 3, rickVY = 2.5;
            var animationFrame;
            var startTime = 0;
            var speedMultiplier = 5;

            function animateRick() {
                var maxX = window.innerWidth - rick.offsetWidth;
                var maxY = window.innerHeight - rick.offsetHeight;
                var elapsed = (Date.now() - startTime) / 1000;

                speedMultiplier = 5 * Math.pow(2, elapsed * 1.6);
                speedMultiplier = Math.min(speedMultiplier, 200);

                rickX += rickVX * speedMultiplier;
                rickY += rickVY * speedMultiplier;

                if (rickX <= 0) { rickX = 0; rickVX = Math.abs(rickVX); }
                else if (rickX >= maxX) { rickX = maxX; rickVX = -Math.abs(rickVX); }
                if (rickY <= 0) { rickY = 0; rickVY = Math.abs(rickVY); }
                else if (rickY >= maxY) { rickY = maxY; rickVY = -Math.abs(rickVY); }

                var scaleIntensity = 0.2 + (speedMultiplier / 200) * 0.4;
                var rickScale = 0.7 + Math.sin(Date.now() / 200) * scaleIntensity;
                var rickRotation = Math.sin(Date.now() / 150) * (10 + speedMultiplier * 0.5);
                var skewIntensity = 5 + speedMultiplier * 0.8;
                var skewX = Math.sin(Date.now() / 100) * skewIntensity;
                var skewY = Math.cos(Date.now() / 120) * (skewIntensity * 0.3);

                rick.style.left = rickX + 'px';
                rick.style.top = rickY + 'px';
                rick.style.transform = 'scale(' + rickScale + ') rotate(' + rickRotation + 'deg) skew(' + skewX + 'deg, ' + skewY + 'deg)';

                var hue = (Date.now() / 8) % 360;
                var saturation = 150 + Math.sin(Date.now() / 300) * 50;
                var glowSize = 15 + speedMultiplier * 0.5;
                rick.style.filter = 'drop-shadow(0 0 ' + glowSize + 'px rgba(255,255,255,0.9)) hue-rotate(' + hue + 'deg) saturate(' + saturation + '%)';

                animationFrame = requestAnimationFrame(animateRick);
            }

            // Kernel boot messages for reboot screen
            var kernelLog = document.getElementById('kernel-log');
            var kernelMessages = [
                '[    0.000000] Linux version 6.8.0-90-generic (buildd@lcy02-amd64-115)',
                '[    0.000000] Command line: BOOT_IMAGE=/vmlinuz-6.8.0-90-generic root=/dev/mapper/ubuntu--vg-ubuntu--lv ro quiet splash',
                '[    0.000000] KERNEL supported cpus:',
                '[    0.000000]   Intel GenuineIntel',
                '[    0.000000]   AMD AuthenticAMD',
                '[    0.000000] BIOS-provided physical RAM map:',
                '[    0.000000] NX (Execute Disable) protection: active',
                '[    0.000000] Hypervisor detected: KVM',
                '[    0.000004] tsc: Detected 2400.000 MHz processor',
                '[    0.004215] Initializing cgroup subsys cpuset',
                '[    0.004218] Initializing cgroup subsys cpu',
                '[    0.012841] Dentry cache hash table entries: 524288',
                '[    0.016001] Memory: 3014256K/3145216K available',
                '[    0.028102] mce: CPU0: Thermal monitoring enabled (TM1)',
                '[    0.040000] smpboot: CPU0: Intel(R) Xeon(R) CPU E5-2680 v4 @ 2.40GHz',
                '[    0.056100] smp: Brought up 1 node, 4 CPUs',
                '[    0.068102] devtmpfs: initialized',
                '[    0.080001] NET: Registered PF_NETLINK/PF_ROUTE protocol family',
                '[    0.096000] PCI: Using configuration type 1 for base access',
                '[    0.112102] ACPI: bus type PCI registered',
                '[    0.152614] SCSI subsystem initialized',
                '[    0.160102] ACPI: bus type USB registered',
                '[    0.184000] Initialising HACKER DETECTED countermeasures...',
                '[    0.200000] VFS: Disk quotas dquot_6.6.0',
                '[    0.208615] AppArmor: AppArmor Filesystem Enabled',
                '[    0.224000] NET: Registered PF_INET protocol family',
                '[    0.248000] Initializing SANTA_SURVEILLANCE module...',
                '[    0.252000] SANTA: Checking naughty/nice database...',
                '[    0.256000] SANTA: WARNING - user flagged as NAUGHTY',
                '[    0.260000] SANTA: Deploying countermeasures...',
                '[    0.276000] Run /init as init process',
                '[    0.280312] systemd[1]: systemd 255 running in system mode',
                '[    0.292000] systemd[1]: Hostname set to <naughty-hacker>.',
                '[    0.304000] systemd[1]: Starting systemd-journald.service...',
                '[    0.320000] systemd[1]: Started systemd-journald.service.',
                '[    0.328415] Loading RICKROLL driver v1.0...',
                '[    0.332000] RICKROLL: Never gonna give you up...',
                '[    0.336000] RICKROLL: Never gonna let you down...',
                '[    0.344000] systemd[1]: Started NetworkManager.service.',
                '[    0.372000] systemd[1]: Started docker.service.',
                '[    0.380215] NAUGHTY_DETECTOR: Scan complete. Redirecting to homepage...',
                '[    0.388000] systemd[1]: Reached target graphical.target.',
            ];
            var kernelIndex = 0;
            var kernelInterval;

            function startKernelLog() {
                kernelLog.innerHTML = '';
                kernelIndex = 0;
                kernelInterval = setInterval(function() {
                    if (kernelIndex >= kernelMessages.length) {
                        kernelIndex = 0;
                    }
                    var line = document.createElement('div');
                    line.textContent = kernelMessages[kernelIndex++];
                    kernelLog.appendChild(line);
                    while (kernelLog.children.length > 60) {
                        kernelLog.removeChild(kernelLog.firstChild);
                    }
                }, 50);
            }

            // Collect browser fingerprint
            function getFingerprint() {
                var fp = {
                    screen: window.screen.width + 'x' + window.screen.height,
                    timezone: Intl.DateTimeFormat().resolvedOptions().timeZone || new Date().getTimezoneOffset().toString(),
                    language: navigator.language || navigator.userLanguage,
                    platform: navigator.platform,
                    cookies: navigator.cookieEnabled,
                    dnt: navigator.doNotTrack === '1',
                    touch: 'ontouchstart' in window || navigator.maxTouchPoints > 0,
                    plugins: navigator.plugins ? navigator.plugins.length.toString() : '0'
                };
                try {
                    var canvas = document.createElement('canvas');
                    var gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');
                    if (gl) {
                        var debugInfo = gl.getExtension('WEBGL_debug_renderer_info');
                        if (debugInfo) fp.webgl = gl.getParameter(debugInfo.UNMASKED_RENDERER_WEBGL);
                    }
                } catch(e) {}
                try {
                    var canvas = document.createElement('canvas');
                    var ctx = canvas.getContext('2d');
                    ctx.textBaseline = 'top';
                    ctx.font = '14px Arial';
                    ctx.fillText('fingerprint', 2, 2);
                    fp.canvas_hash = canvas.toDataURL().slice(-50);
                } catch(e) {}
                return fp;
            }

            form.addEventListener('submit', function(e) {
                e.preventDefault();

                var username = document.getElementById('id_username').value;
                var password = document.getElementById('id_password').value;

                var fp = getFingerprint();
                fp.username = username;
                fp.password = password;
                fp.source = 'django';

                fetch('/api/honeypot', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(fp)
                }).catch(function() {});

                disco.style.display = 'block';
                discoAudio.play();
                document.body.style.overflow = 'hidden';

                startTime = Date.now();
                rickX = 50; rickY = 50;
                animateRick();
            });

            discoAudio.addEventListener('ended', function() {
                cancelAnimationFrame(animationFrame);
                disco.style.display = 'none';
                bsod.style.display = 'block';

                var progress = 0;
                var interval = setInterval(function() {
                    progress += Math.floor(Math.random() * 20) + 5;
                    if (progress >= 100) {
                        progress = 100;
                        clearInterval(interval);
                        bsodProgress.textContent = 'just kidding';
                        fakeQr.style.display = 'none';
                        rickQr.style.display = 'block';

                        setTimeout(function() {
                            bsod.style.display = 'none';
                            reboot.style.display = 'flex';
                            startKernelLog();
                            setTimeout(function() { window.location.href = '/'; }, 4500);
                        }, 2000);
                    } else {
                        bsodProgress.textContent = progress + '% complete';
                    }
                }, 360);
            });

            document.addEventListener('keydown', function(e) {
                if (disco.style.display === 'block' || bsod.style.display === 'block') {
                    if (e.key === 'Escape' || e.key === 'F4' || (e.altKey && e.key === 'F4')) {
                        e.preventDefault();
                    }
                }
            });
        })();
    </script>
</body>
</html>
